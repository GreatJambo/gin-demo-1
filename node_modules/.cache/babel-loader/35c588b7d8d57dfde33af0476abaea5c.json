{"remainingRequest":"/home/pan/Work/src/html/jkdev-vue/node_modules/babel-loader/lib/index.js!/home/pan/Work/src/html/jkdev-vue/node_modules/eslint-loader/index.js??ref--13-0!/home/pan/Work/src/html/jkdev-vue/src/store/module/user.js","dependencies":[{"path":"/home/pan/Work/src/html/jkdev-vue/src/store/module/user.js","mtime":1588394329948},{"path":"/home/pan/Work/src/html/jkdev-vue/node_modules/cache-loader/dist/cjs.js","mtime":1587271952385},{"path":"/home/pan/Work/src/html/jkdev-vue/node_modules/babel-loader/lib/index.js","mtime":1587271952408},{"path":"/home/pan/Work/src/html/jkdev-vue/node_modules/eslint-loader/index.js","mtime":1587271959038}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgc3RvcmFnZVNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlL3N0b3JhZ2VTZXJ2aWNlJzsKaW1wb3J0IHVzZXJTZXJ2aWNlIGZyb20gJ0Avc2VydmljZS91c2VyU2VydmljZSc7CnZhciB1c2VyTW9kdWxlID0gewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIHRva2VuOiBzdG9yYWdlU2VydmljZS5nZXQoc3RvcmFnZVNlcnZpY2UuVVNFUl9UT0tFTiksCiAgICB1c2VySW5mbzogSlNPTi5wYXJzZShzdG9yYWdlU2VydmljZS5nZXQoc3RvcmFnZVNlcnZpY2UuVVNFUl9JTkZPKSkKICB9LAogIG11dGF0aW9uczogewogICAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICAgIC8vIOabtOaWsOacrOWcsOe8k+WtmAogICAgICBzdG9yYWdlU2VydmljZS5zZXQoc3RvcmFnZVNlcnZpY2UuVVNFUl9UT0tFTiwgdG9rZW4pOyAvLyDmm7TmlrBzdGF0ZQoKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBTRVRfVVNFUklORk86IGZ1bmN0aW9uIFNFVF9VU0VSSU5GTyhzdGF0ZSwgdXNlckluZm8pIHsKICAgICAgLy8g5pu05paw5pys5Zyw57yT5a2YCiAgICAgIHN0b3JhZ2VTZXJ2aWNlLnNldChzdG9yYWdlU2VydmljZS5VU0VSX0lORk8sIEpTT04uc3RyaW5naWZ5KHVzZXJJbmZvKSk7IC8vIOabtOaWsHN0YXRlCgogICAgICBzdGF0ZS51c2VySW5mbyA9IHVzZXJJbmZvOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKGNvbnRleHQsIF9yZWYpIHsKICAgICAgdmFyIG5hbWUgPSBfcmVmLm5hbWUsCiAgICAgICAgICB0ZWxlcGhvbmUgPSBfcmVmLnRlbGVwaG9uZSwKICAgICAgICAgIHBhc3N3b3JkID0gX3JlZi5wYXNzd29yZDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB1c2VyU2VydmljZS5yZWdpc3Rlcih7CiAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgdGVsZXBob25lOiB0ZWxlcGhvbmUsCiAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIC8vIOS/neWtmHRva2VuCiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnU0VUX1RPS0VOJywgcmVzLmRhdGEuZGF0YS50b2tlbik7CiAgICAgICAgICByZXR1cm4gdXNlclNlcnZpY2UuaW5mbygpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgLy8g5L+d5a2Y55So5oi35L+h5oGvCiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnU0VUX1VTRVJJTkZPJywgcmVzLmRhdGEuZGF0YS51c2VyKTsKICAgICAgICAgIHJlc29sdmUocmVzKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKGNvbnRleHQsIF9yZWYyKSB7CiAgICAgIHZhciB0ZWxlcGhvbmUgPSBfcmVmMi50ZWxlcGhvbmUsCiAgICAgICAgICBwYXNzd29yZCA9IF9yZWYyLnBhc3N3b3JkOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHVzZXJTZXJ2aWNlLmxvZ2luKHsKICAgICAgICAgIHRlbGVwaG9uZTogdGVsZXBob25lLAogICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAvLyDkv53lrZh0b2tlbgogICAgICAgICAgY29udGV4dC5jb21taXQoJ1NFVF9UT0tFTicsIHJlcy5kYXRhLmRhdGEudG9rZW4pOwogICAgICAgICAgcmV0dXJuIHVzZXJTZXJ2aWNlLmluZm8oKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIC8vIOS/neWtmOeUqOaIt+S/oeaBrwogICAgICAgICAgY29udGV4dC5jb21taXQoJ1NFVF9VU0VSSU5GTycsIHJlcy5kYXRhLmRhdGEudXNlcik7CiAgICAgICAgICByZXNvbHZlKHJlcyk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KGNvbnRleHQpIHsKICAgICAgLy8g5riF6ZmkdG9rZW4KICAgICAgY29udGV4dC5jb21taXQoJ1NFVF9UT0tFTicsICcnKTsgLy8g5riF6Zmk55So5oi35L+h5oGvCgogICAgICBjb250ZXh0LmNvbW1pdCgnU0VUX1VTRVJJTkZPJywgJycpOwogICAgfQogIH0KfTsKZXhwb3J0IGRlZmF1bHQgdXNlck1vZHVsZTs="},{"version":3,"sources":["/home/pan/Work/src/html/jkdev-vue/src/store/module/user.js"],"names":["storageService","userService","userModule","namespaced","state","token","get","USER_TOKEN","userInfo","JSON","parse","USER_INFO","mutations","SET_TOKEN","set","SET_USERINFO","stringify","actions","register","context","name","telephone","password","Promise","resolve","reject","then","res","commit","data","info","user","catch","err","login","logout"],"mappings":"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","sourcesContent":["import storageService from '@/service/storageService';\nimport userService from '@/service/userService';\n\nconst userModule = {\n  namespaced: true,\n  state: {\n    token: storageService.get(storageService.USER_TOKEN),\n    userInfo: JSON.parse(storageService.get(storageService.USER_INFO)),\n  },\n\n  mutations: {\n    SET_TOKEN(state, token) {\n      // 更新本地缓存\n      storageService.set(storageService.USER_TOKEN, token);\n      // 更新state\n      state.token = token;\n    },\n    SET_USERINFO(state, userInfo) {\n      // 更新本地缓存\n      storageService.set(storageService.USER_INFO, JSON.stringify(userInfo));\n      // 更新state\n      state.userInfo = userInfo;\n    },\n  },\n\n  actions: {\n    register(context, { name, telephone, password }) {\n      return new Promise((resolve, reject) => {\n        userService.register({ name, telephone, password }).then((res) => {\n          // 保存token\n          context.commit('SET_TOKEN', res.data.data.token);\n          return userService.info();\n        }).then((res) => {\n          // 保存用户信息\n          context.commit('SET_USERINFO', res.data.data.user);\n          resolve(res);\n        }).catch((err) => {\n          reject(err);\n        });\n      });\n    },\n    login(context, { telephone, password }) {\n      return new Promise((resolve, reject) => {\n        userService.login({ telephone, password }).then((res) => {\n          // 保存token\n          context.commit('SET_TOKEN', res.data.data.token);\n          return userService.info();\n        }).then((res) => {\n          // 保存用户信息\n          context.commit('SET_USERINFO', res.data.data.user);\n          resolve(res);\n        }).catch((err) => {\n          reject(err);\n        });\n      });\n    },\n    logout(context) {\n      // 清除token\n      context.commit('SET_TOKEN', '');\n      // 清除用户信息\n      context.commit('SET_USERINFO', '');\n    },\n  },\n};\nexport default userModule;\n"]}]}